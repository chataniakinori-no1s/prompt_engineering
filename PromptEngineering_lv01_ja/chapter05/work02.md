---
seq: 27.1
title: ワーク1: 練習問題1 - 問題の本質を見抜く
slug: chapter05/work1_exercise1
description: 問題の本質を見極めるためのステップバックテクニックを実践する
type: exercise
relation: chapter05/work1
difficulty: 2
displayLanguage: ja
duration: 15
---

### 練習問題1

**【シチュエーション】**
あなたは、あるWebアプリケーションの開発チームに所属するエンジニアです。ユーザーから「翻訳機能が遅い」というクレームが多数寄せられています。開発チームのメンバーは、この問題を解決するために、まずは問題の本質を理解する必要があります。

**▼ 現在の状況**
- 翻訳APIのレスポンスタイムが5秒以上かかっている
- ユーザー数が増えるとさらに遅くなる
- サーバーのCPU使用率が高い

**▼ 開発チームの会話**
> **エンジニアA**: 「翻訳APIのレスポンスが遅いってことは、APIの呼び出し回数が多すぎるんじゃない？」
> 
> **エンジニアB**: 「いや、APIのレスポンスが遅いだけなら、キャッシュを導入すればいいんじゃない？」
> 
> **エンジニアC**: 「でも、それって対症療法でしかないよね。根本的な原因を特定すべきじゃない？」

**▼ あなたのタスク**
この問題の本質を理解するために、以下の手順で進めてください。

1. まず、問題を引き起こしている可能性のある要因を、以下の観点から洗い出してください。
   - アプリケーション層
   - データベース層
   - ネットワーク層
   - インフラ層

2. 次に、最も可能性の高い根本原因を1つ選び、その理由を説明してください。

3. 最後に、その根本原因を特定するための具体的な調査方法を提案してください。

### Hint
問題の本質を見極めるためには、一歩引いて全体像を把握することが重要です。以下のような観点で考えてみましょう。

- 問題が発生しているのは特定の機能やユースケースに限定されていますか？
- 問題が発生する前後で何か変更はありましたか？
- パフォーマンスの低下は徐々に進行しましたか？ それとも急激に発生しましたか？
- ログやモニタリングデータから、異常なパターンは見つかりましたか？

### 回答例
```
1. 可能性のある要因:
   - アプリケーション層: N+1クエリ問題、非効率なアルゴリズム
   - データベース層: インデックス不足、スロークエリ
   - ネットワーク層: 遅延、パケットロス
   - インフラ層: リソース不足（CPU、メモリ、I/O）

2. 最も可能性の高い根本原因:
   N+1クエリ問題が最も可能性が高いです。その理由は...

3. 調査方法:
   - アプリケーションログの確認
   - データベースのスロークエリログの分析
   - APMツールを使用したパフォーマンスプロファイリング
```

### プロンプト例
```
あなたは、パフォーマンス問題の調査を専門とするシニアエンジニアです。
以下の情報を基に、問題の本質を特定するための調査を進めてください。

【問題の概要】
- 翻訳機能のレスポンスタイムが5秒以上かかる
- ユーザー数が増えるとさらに遅くなる
- サーバーのCPU使用率が高い

【調査結果】
- データベースへのクエリ数が異常に多い
- 1回の翻訳リクエストで、関連テーブルに対して複数回のクエリが発行されている
- インデックスは適切に設定されている

この情報を基に、以下の質問に答えてください。
1. この問題の根本原因として最も可能性が高いのは何ですか？
2. その原因を特定するための具体的な調査方法を教えてください。
3. 問題を解決するための対策案を3つ挙げてください。
```

---
この練習問題は、問題の本質を見極めるための「ステップバック」の考え方を実践するものです。
実際の開発現場では、表面的な問題に飛びつかず、一歩引いて全体像を把握することが重要です。
