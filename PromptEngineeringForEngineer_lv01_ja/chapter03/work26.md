---
seq: 30
title: サンプル課題
slug: chapter03/work26
description: AIの思考プロセスを段階的に誘導するChain of Thoughtプロンプティングを学ぶ
type: work
relation: chapter03/index,chapter03/work11,chapter03/work21
difficulty: 3
displayLanguage: ja
duration: 25
---

# 段階的思考の誘導（Chain of Thought）

:::sample-quiz
## 📝 サンプル課題

議事録をAIでまとめていた田中さんは、「AIアシスタント」のベータテスト中に重大なバグが発生したと報告を受け取りました。

> **田中さんのお悩み:**
> 「テスターから、『特定の操作をすると、AIアシスタントの応答が極端に遅くなる』という報告がありました。原因がデータベースなのか、ネットワークなのか、それともAIモデル自体の問題なのか、考えられる要因が色々ありすぎて、どこから調査すればいいか分からないんです…。AIがひとつひとつの可能性を丁寧に考えてくれたら嬉しいんですけど、できますか？」
:::

この複雑な問題のボトルネックを特定するために、AIに段階的に原因を推論させるChain of Thoughtパターンを活用してみましょう。

## 解説

### Chain of Thought (CoT) とは？

Chain of Thought（CoT）、日本語で「思考の連鎖」とは、AIに最終的な答えだけでなく、そこに至るまでの中間的な思考ステップを順序立てて出力させるプロンプト技術です。

複雑な問題や多段階の推論が必要なタスクに対して、CoTを用いることでAIは問題を小さなステップに分解して考えるようになります。これにより、計算ミスや論理の飛躍が減り、最終的な回答の精度が劇的に向上します。

:::point
### なぜCoTは有効なのか？
人間が難しい問題を解くとき、いきなり答えを出そうとせず、情報を整理したり、原因を仮説立てたり、段階を踏んで考えます。CoTは、AIにこの人間的な思考プロセスを模倣させることで、より深く、正確な答えを導き出すためのテクニックです。
:::

### CoTを促すプロンプト

CoTをAIに実行させるのは意外と簡単です。プロンプトに以下のようなフレーズを追加するだけです。

- 「ステップバイステップで考えてください。」
- 「思考の過程を説明してください。」
- 「順を追って説明してください。」

これらの指示により、AIは答えを出す前に、どのようにその結論に至ったかの論理的な道筋を示してくれます。

### CoTをさらに活用する：思考の「型」を与える

「ステップバイステップで考えて」という指示は強力ですが、今回の原因分析のように、より構造的なアウトプットが欲しい場合は、AIに**思考の「型」**、つまり**分析のフレームワーク**そのものを与えることで、さらにアウトプットの質をコントロールできます。

例えば今回の田中さんの課題では、単にAIに自由に分析させるのではなく、
1.  **データベースの問題**
2.  **ネットワークの問題**
3.  **AIモデルの問題**

というように、調査すべき原因の候補を順番に考察させるという思考のプロセスそのものを指示として与えます。
これにより、AIは私たちの思考プロセスに沿って、網羅的で論理的な分析結果を出力してくれるのです。

:::warning
CoTは非常に強力ですが、万能ではありません。AIが間違った前提で思考を始めると、その後のステップもすべて間違ってしまう可能性があります。出力された思考の過程を鵜みにせず、人間がきちんとチェックすることが重要です。
:::

<details><summary>サンプル課題解答</summary>

```
あなたは、大規模Webアプリケーションのトラブルシューティングを専門とする、経験豊富なSRE（Site Reliability Engineer）です。
現在、私が担当する新機能「AIアシスタント」で、特定の操作をすると応答が極端に遅くなるという問題が発生しています。

考えられる原因を特定するため、以下の思考プロセスに従って、あなたの考察を報告してください。

# 思考プロセス
1.  まず、「データベース」に問題がある可能性を検討してください。どのような状況が考えられますか？
2.  次に、「ネットワーク」に問題がある可能性を検討してください。どのような状況が考えられますか？
3.  最後に、「AIモデル自体」に問題がある可能性を検討してください。どのような状況が考えられますか？

ステップバイステップで、論理的に考えてください。
```

**▼ AIによる出力例**
```
承知いたしました。SREとして、ご報告いただいたパフォーマンス低下の問題について、ステップバイステップで原因を考察します。

**ステップ1：データベースの問題の可能性**

まず、データベース起因のボトルネックを疑います。
特定の操作で応答が遅くなるということから、その操作が複雑なデータベースクエリを発行している可能性があります。例えば、大量のJOINや、インデックスが効いていないカラムでの検索が実行されている場合、応答時間は著しく悪化します。また、特定の操作によってデータベースの接続コネクションを使い果たし、後続の処理が待たされている可能性も考えられます。

**ステップ2：ネットワークの問題の可能性**

次に、ネットワーク遅延の可能性を検討します。
AIアシスタントが外部のAIモデルAPI（例えばOpenAI APIなど）を利用している場合、そのAPIサーバーとの通信経路で遅延が発生している可能性があります。あるいは、社内ネットワークからクラウド環境への通信帯域が、特定の操作によって発生する大量のデータ転送によって逼迫していることも考えられます。

**ステップ3：AIモデル自体の問題の可能性**

最後に、AIモデル自体が原因である可能性を考察します。
特定の操作が、AIモデルにとって非常に複雑で、推論に時間のかかるプロンプトを生成している可能性があります。例えば、非常に長い文脈を要約させたり、難解な専門知識に関する回答を生成させたりする場合、モデルの思考時間（推論時間）が長くなり、結果として応答が遅くなることがあります。これは、モデルの性能限界や、プロンプトの設計に起因する問題と考えられます。
```
</details>
