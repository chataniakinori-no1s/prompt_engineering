---
seq: 52
title: 思考の深化（ステップバック）
slug: chapter05/work46
description: 問題の本質を見極め、より深い分析と解決策を導くためのステップバックテクニックを学ぶ
type: work
relation: chapter05/index
difficulty: 3
displayLanguage: ja
duration: 25
---

# 思考の深化（ステップバック）- 問題の本質を見抜く

## 📝 サンプル課題
システムエンジニアの高橋さんの元に、プロダクトマネージャーの田中さんが少し慌てた様子でやってきました。

**田中さんのお悩み:**
> 「高橋さん、緊急事態です。実装してもらったリアルタイム翻訳機能、大好評なんですけど、その影響で特定のエンドポイント(`/api/v1/translate`)のレスポンスが極端に悪化しているらしいです。サポートチームには『最近、翻訳がすごく遅い』というクレームが殺到していて、このままでは大問題になりかねません。何とかして、このAPIを速くしてくれませんか？」

**高橋さんの返答:**
> 「アクセス急増が原因だとは思うけど、単純にサーバーを増強するだけだと、コストもかさむし、根本的な解決にならないかな。下手にいじって、別のバグを生むのも避けたい。場当たり的な対応ではなく、きちんと原因を特定して、最適な改善策を打ちたいな…。」

このような、根本的な問題の分析にこそ、AIの思考を深く導く「ステップバック」の技術が役立ちます。AIを活用して、問題の核心に迫りましょう。

## 解説

### AIに「そもそも」を考えさせるステップバック思考

私たちは問題に直面すると、すぐに「どう解決するか？(How)」を考えがちです。しかし、より重要なのは「なぜこの問題が起きているのか？(Why)」や「そもそも何を達成すべきなのか？(What)」を問うことです。

**ステップバック**とは、このようにAIとの対話において、あえて一歩引いた視点から、問題の前提や本質、根本原因を考えさせるプロンプト技術です。

- **表面的な解決策から脱却できる**: 「〇〇するには？」と聞く代わりに、「そもそも、なぜ〇〇が必要なのか？」と問うことで、より本質的な解決策の発見に繋がります。
- **問題の解像度を高める**: 複雑な問題を複数の視点から分解・分析させ、これまで気づかなかった論点を発見できます。
- **戦略的な意思決定を支援する**: 目先の課題だけでなく、長期的なゴールやビジョンに立ち返って思考を促すことで、より大局的な判断が可能になります。

AIに安易に答えを求めるのではなく、**思考の出発点そのものを問い直す**ような質問を投げかけましょう。

### サンプルプロンプト

**【シチュエーション】**
田中さんから「APIを速くしてほしい」という依頼を受けた高橋さん。彼は、いきなりコードの修正に取り掛かるのではなく、まずは問題の全体像を把握するため、一歩引いてAIに問いかけることにしました。

**▼ プロンプト例**
```
あなたは、Webアプリケーションのパフォーマンスチューニングを専門とする、経験豊富なSRE（Site Reliability Engineer）です。

現在、私が担当するサービスで、特定のAPIエンドポイント(`/api/v1/translate`)のレスポンスが極端に悪化し、問題となっています。

この問題の根本原因を特定するため、考えられる技術的な要因を体系的に洗い出したいです。
パフォーマンス劣化の原因となりうる要素を、以下の3つのレイヤーに分類し、それぞれ具体的な可能性を複数挙げてください。

# 分析のレイヤー
1.  アプリケーションレイヤー
2.  データベースレイヤー
3.  インフラストラクチャーレイヤー
```

**▼ AIによる出力例**
```
承知いたしました。SREとして、APIパフォーマンス劣化の潜在的な原因をレイヤーごとに分析します。

### 1. アプリケーションレイヤーでの可能性
- **N+1クエリ問題**: ループ処理の中で、都度データベースへのクエリが発行されており、APIコール一回あたりに大量のSQLが実行されている可能性があります。
- **非効率なアルゴリズム**: 特定のデータ処理や計算に、計算量の多いアルゴリズムが使用されており、CPUリソースを過剰に消費している可能性があります。
- **メモリリーク**: アプリケーションがメモリを適切に解放できておらず、実行時間が長くなるにつれてパフォーマンスが徐々に悪化している可能性があります。
- **外部APIコールの遅延**: 翻訳処理のために呼び出している外部API（例: DeepL API）からの応答が遅い、あるいはタイムアウトが頻発している可能性があります。

### 2. データベースレイヤーでの可能性
- **インデックスの不足・不備**: クエリの実行計画（Execution Plan）が非効率になっており、テーブルのフルスキャンが発生している可能性があります。
- **ロック競合**: 特定のテーブルや行に対して更新処理が集中し、トランザクションの待機時間が長くなっている可能性があります。
- **コネクションプールの枯渇**: アプリケーションからの接続要求に対し、データベースのコネクションプールが不足し、接続待ちが発生している可能性があります。

### 3. インフラストラクチャーレイヤーでの可能性
- **リソース不足**: サーバーのCPU、メモリ、ディスクI/Oなどが、現在のアクセス負荷に対して単純に不足している可能性があります。
- **ネットワーク帯域の飽和**: サーバー間の通信や、外部へのAPIコールにおいて、ネットワーク帯行が上限に達している可能性があります。
- **不適切なスケーリング設定**: オートスケーリングの設定が不適切で、負荷の急増にサーバーリソースの増強が追いついていない可能性があります。
```
